<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘è¨ˆç®—ã‚·ãƒ¼ãƒˆ</title>
    <style>
        /* å‡ºç”£å¾Œæ‰‹ç¶šããƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨è‰²åˆã„ã‚’çµ±ä¸€ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #3A3A3A; /* å…¨ä½“ã®æ–‡å­—è‰²ã‚’æ¿ƒã„ã‚°ãƒ¬ãƒ¼ã« */
            background: #FFF8F6; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨åŒã˜èƒŒæ™¯è‰² */
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #FFFFFF; /* ç™½ã„èƒŒæ™¯ */
            border-radius: 12px; /* å°‘ã—ä¸¸ã¿ã‚’å¤§ãã */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* å½±ã‚’æŸ”ã‚‰ã‹ã */
            overflow: hidden;
        }

        .header {
            background: #F7CEDC; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¨åŒã˜è‰² */
            color: #3A3A3A; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¨åŒã˜æ–‡å­—è‰² */
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 500; /* ãƒ•ã‚©ãƒ³ãƒˆã®å¤ªã•ã‚’èª¿æ•´ */
        }

        .header p {
            font-size: 1em;
            opacity: 0.9; /* å°‘ã—é€æ˜åº¦ã‚’æŒãŸã›ã‚‹ */
        }

        .form-section {
            padding: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #5A5A5A; /* ãƒ©ãƒ™ãƒ«ã®è‰²ã‚’èª¿æ•´ */
            font-size: 15px; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
        }

        .input-group small {
            color: #777; /* å°ã•ãªèª¬æ˜æ–‡ã®è‰² */
            font-size: 0.85em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #E2DDE3; /* æŸ”ã‚‰ã‹ã„ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
            border-radius: 8px; /* ä¸¸ã¿ã‚’å°‘ã—å¤§ãã */
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: white;
            color: #3A3A3A; /* å…¥åŠ›æ–‡å­—è‰² */
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #C58FA0; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®å¼·èª¿è‰²ç³» */
            box-shadow: 0 0 0 3px rgba(197, 143, 160, 0.2); /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®å½± */
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            transform: scale(1.2);
            accent-color: #C58FA0; /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®è‰² */
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-weight: normal;
            color: #3A3A3A; /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ©ãƒ™ãƒ«ã®è‰² */
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: #D79BA0; /* æš–è‰²ç³»ã®ãƒœã‚¿ãƒ³è‰² */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 17px; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°‘ã—å¤§ãã */
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            background: #C58FA0; /* ãƒ›ãƒãƒ¼æ™‚ã®è‰² */
            transform: translateY(-1px); /* å°‘ã—æµ®ãä¸ŠãŒã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        }

        .results {
            margin-top: 30px;
            padding: 25px;
            background: #FDF5F7; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®æ³¨æ„äº‹é …ã¨åŒã˜èƒŒæ™¯è‰² */
            border-radius: 10px;
            border: 1px solid #F2DDE3; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®æ³¨æ„äº‹é …ã¨åŒã˜ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
            display: none;
            animation: fadeIn 0.5s ease-out; /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results h2 {
            margin-bottom: 20px;
            font-size: 1.6em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
            text-align: center;
            color: #A1546E; /* æ¿ƒã„ã‚ã®ãƒ”ãƒ³ã‚¯ */
        }

        .result-section {
            margin-bottom: 25px;
        }

        .result-section h3 {
            font-size: 1.3em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
            color: #C58FA0; /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®æ³¨æ„äº‹é …H3ã¨åŒã˜è‰² */
            margin-bottom: 10px;
            border-bottom: 2px solid #D79BA0; /* ãƒœã‚¿ãƒ³ã¨åŒã˜è‰²ã§ä¸‹ç·š */
            padding-bottom: 5px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ */
            border-bottom: 1px solid #F2F2F2; /* éå¸¸ã«è–„ã„ãƒœãƒ¼ãƒ€ãƒ¼ */
            color: #3A3A3A; /* æ–‡å­—è‰²ã‚’æ¿ƒã */
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-item.total {
            font-weight: bold;
            font-size: 1.2em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            margin-top: 20px; /* ä½™ç™½ã‚’å¤§ãã */
            padding-top: 20px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¤§ãã */
            border-top: 2px solid #C58FA0; /* æ¿ƒã„ã‚ã®ãƒ”ãƒ³ã‚¯ */
            color: #A1546E; /* æœ€ã‚‚æ¿ƒã„ãƒ”ãƒ³ã‚¯ */
        }

        .notice {
            background: #FFF3F6; /* ã•ã‚‰ã«è–„ã„ãƒ”ãƒ³ã‚¯ */
            border: 1px solid #F7CEDC; /* ãƒ˜ãƒƒãƒ€ãƒ¼ã¨åŒã˜è‰²ã®ãƒœãƒ¼ãƒ€ãƒ¼ */
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px; /* ä¸Šéƒ¨ã®ä½™ç™½ã‚’èª¿æ•´ */
            color: #5A5A5A; /* æ³¨æ„äº‹é …ã®æ–‡å­—è‰² */
        }

        .notice h3 {
            margin-bottom: 15px;
            color: #A1546E; /* æ¿ƒã„ã‚ã®ãƒ”ãƒ³ã‚¯ */
            font-size: 1.2em;
        }

        .notice ul {
            margin-left: 25px; /* ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’èª¿æ•´ */
        }

        .notice li {
            margin-bottom: 8px; /* å„é …ç›®ã®ä½™ç™½ã‚’èª¿æ•´ */
            color: #5A5A5A;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .header {
                padding: 25px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .form-section {
                padding: 20px;
            }

            .results, .notice {
                padding: 20px;
                margin: 20px;
            }
            .results h2 {
                font-size: 1.4em;
            }
            .result-section h3 {
                font-size: 1.1em;
            }
            .result-item.total {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘è¨ˆç®—ã‚·ãƒ¼ãƒˆ</h1>
            <p>2025å¹´æœ€æ–°åˆ¶åº¦å¯¾å¿œç‰ˆï¼ˆå¤«å©¦åˆ¥è¨ˆç®—ãƒ»åŒ»ç™‚è²»æ§é™¤å¯¾å¿œï¼‰</p>
        </div>

        <div class="form-section">
            <div class="form-row">
                <div class="input-group">
                    <label for="husbandSalary">å¤«ã®æœˆçµ¦ï¼ˆå††ï¼‰<br><small>â€»ç¤¾ä¼šä¿é™ºæ–™ãªã©ãŒå¼•ã‹ã‚Œã‚‹å‰ã®é¡é¢é‡‘é¡</small></label>
                    <input type="number" id="husbandSalary" value="350000" min="0">
                </div>
                <div class="input-group">
                    <label for="wifeSalary">å¦»ã®æœˆçµ¦ï¼ˆå††ï¼‰<br><small>â€»ç¤¾ä¼šä¿é™ºæ–™ãªã©ãŒå¼•ã‹ã‚Œã‚‹å‰ã®é¡é¢é‡‘é¡</small></label>
                    <input type="number" id="wifeSalary" value="280000" min="0">
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="husbandLeavePeriod">å¤«ã®è‚²ä¼‘å–å¾—æœŸé–“ï¼ˆå¹´ï¼‰</label>
                    <select id="husbandLeavePeriod">
                        <option value="0">å–å¾—ã—ãªã„</option>
                        <option value="0.038">14æ—¥é–“</option> <option value="0.0833">1ãƒ¶æœˆ</option> <option value="0.25">3ãƒ¶æœˆ</option>
                        <option value="0.5">6ãƒ¶æœˆ</option>
                        <option value="1">1å¹´</option>
                        <option value="1.5">1å¹´6ãƒ¶æœˆ</option>
                        <option value="2">2å¹´</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="wifeLeavePeriod">å¦»ã®è‚²ä¼‘å–å¾—æœŸé–“ï¼ˆå¹´ï¼‰</label>
                    <select id="wifeLeavePeriod">
                        <option value="0.5">6ãƒ¶æœˆ</option>
                        <option value="1" selected>1å¹´</option>
                        <option value="1.5">1å¹´6ãƒ¶æœˆ</option>
                        <option value="2">2å¹´</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="medicalExpenses">å¹´é–“åŒ»ç™‚è²»ç·é¡ï¼ˆå††ï¼‰<br><small>â€»å®Ÿéš›ã«æ”¯æ‰•ã£ãŸåŒ»ç™‚è²»ã®ç·é¡</small></label>
                    <input type="number" id="medicalExpenses" value="0" min="0">
                </div>
                <div class="input-group">
                    <label for="compensatedAmount">ä¿é™ºé‡‘ãªã©ã§è£œå¡«ã•ã‚ŒãŸé‡‘é¡ï¼ˆå††ï¼‰<br><small>â€»å‡ºç”£è‚²å…ä¸€æ™‚é‡‘ã€é«˜é¡ç™‚é¤Šè²»ã€åŒ»ç™‚ä¿é™ºãªã©</small></label>
                    <input type="number" id="compensatedAmount" value="0" min="0">
                </div>
            </div>

            <div class="form-row single">
                <div class="input-group">
                    <label for="familyAllowance">æœˆé¡ã®æ‰¶é¤Šæ‰‹å½“ï¼ˆå††ï¼‰</label>
                    <input type="number" id="familyAllowance" value="0" min="0">
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="isBirthOfThirdChildOrMore">
                <label for="isBirthOfThirdChildOrMore">ä»Šå›ç”Ÿã¾ã‚Œã‚‹å­ãŒç¬¬3å­ä»¥é™ã§ã‚ã‚‹</label>
            </div>

            <button class="calculate-btn" onclick="calculateBenefits()">è¨ˆç®—ã™ã‚‹</button>

            <div id="results" class="results">
                <h2>ğŸ’° è¨ˆç®—çµæœ</h2>
                <div id="resultContent"></div>
            </div>

            <div class="notice">
                <h3>ğŸ“‹ ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦ã®æ³¨æ„äº‹é …</h3>
                <ul>
                    <li>ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€2025å¹´æ™‚ç‚¹ã®æƒ…å ±ã‚’å…ƒã«ã—ãŸ**æ¦‚ç®—å€¤**ã§ã™ã€‚å®Ÿéš›ã®å—çµ¦é¡ã¯ã€å€‹åˆ¥ã®çŠ¶æ³ï¼ˆæ¨™æº–å ±é…¬æœˆé¡ã®å¤‰å‹•ã€å®¶æ—æ§‹æˆã€ç¨é‡‘ã®æ§é™¤ã€å¸‚ç”ºæ‘ã®åˆ¶åº¦ãªã©ï¼‰ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚</li>
                    <li><strong>è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘</strong>ã¯ã€é›‡ç”¨ä¿é™ºã‹ã‚‰æ”¯çµ¦ã•ã‚Œã‚‹éèª²ç¨ã®æ‰‹å½“ã§ã™ã€‚æ¨™æº–å ±é…¬æ—¥é¡ã®ä¸Šé™ï¼ˆ15,690å††ï¼‰ãŒé©ç”¨ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</li>
                    <li><strong>å‡ºç”Ÿå¾Œä¼‘æ¥­æ”¯æ´çµ¦ä»˜é‡‘ï¼ˆä¸¡è¦ªã§ã®è‚²å…ä¼‘æ¥­å–å¾—ä¿ƒé€²åŠ ç®—ï¼‰</strong>ã¯ã€å¤«å©¦ãã‚Œãã‚ŒãŒ14æ—¥ä»¥ä¸Šè‚²å…ä¼‘æ¥­ï¼ˆç”·æ€§ã¯å‡ºç”Ÿæ™‚è‚²å…ä¼‘æ¥­ï¼‰ã‚’å–å¾—ã—ãŸå ´åˆã«ã€**ãã‚Œãã‚Œæœ€å¤§28æ—¥é–“**ã€è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘ã®çµ¦ä»˜ç‡ãŒ67%ã‹ã‚‰80%ã«å¼•ãä¸Šã’ã‚‰ã‚Œã‚‹åˆ¶åº¦ã§ã™ã€‚</li>
                    <li><strong>å…ç«¥æ‰‹å½“</strong>ã¯ã€ä»Šå›ç”Ÿã¾ã‚Œã‚‹ãŠå­ã•ã‚“1äººåˆ†ã®é‡‘é¡ï¼ˆæœˆé¡15,000å††ã¾ãŸã¯30,000å††ï¼‰ã§è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚</li>
                    <li><strong>åŒ»ç™‚è²»æ§é™¤</strong>ã«ã‚ˆã‚‹é‚„ä»˜é¡ã¯ã€ç°¡æ˜“çš„ãªæ‰€å¾—ç¨ç‡ï¼ˆ10%ï¼‰ã§è¨ˆç®—ã—ã¦ãŠã‚Šã€å®Ÿéš›ã®é‚„ä»˜é¡ã¯å€‹äººã®æ‰€å¾—ã‚„ä»–ã®æ§é™¤ã«ã‚ˆã£ã¦å¤‰ã‚ã‚Šã¾ã™ã€‚ç¢ºå®šç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚ã€Œå¹´é–“åŒ»ç™‚è²»ç·é¡ã€ã‹ã‚‰ã€Œä¿é™ºé‡‘ãªã©ã§è£œå¡«ã•ã‚ŒãŸé‡‘é¡ã€ã‚’å·®ã—å¼•ã„ãŸé¡ãŒæ§é™¤ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚</li>
                    <li>æ­£ç¢ºãªæƒ…å ±ã¯ã€ãŠä½ã¾ã„ã®è‡ªæ²»ä½“ã‚„ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯ã€ç¨å‹™ç½²ã«ã”ç¢ºèªãã ã•ã„ã€‚</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 2025å¹´ã®è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘ä¸Šé™è¨­å®š
        const MAX_DAILY_SALARY = 15690; // å††/æ—¥
        const MAX_MONTHLY_SALARY = MAX_DAILY_SALARY * 30; // ç´„47ä¸‡å††/æœˆ

        function calculateChildAllowance(isBirthOfThirdChildOrMore, months) {
            let monthlyAmount = 0;
            if (isBirthOfThirdChildOrMore) {
                // ä»Šå›ç”Ÿã¾ã‚Œã‚‹å­ãŒç¬¬3å­ä»¥é™ã®å ´åˆã€æœˆ30,000å††
                monthlyAmount = 30000;
            } else {
                // ä»Šå›ç”Ÿã¾ã‚Œã‚‹å­ãŒç¬¬1å­ã¾ãŸã¯ç¬¬2å­ã®å ´åˆã€æœˆ15,000å†† (0-2æ­³ç›¸å½“)
                monthlyAmount = 15000;
            }
            return monthlyAmount * months;
        }

        // åŒ»ç™‚è²»æ§é™¤ã®è¨ˆç®—é–¢æ•°ã«è£œå¡«é‡‘é¡ã‚’è¿½åŠ 
        function calculateMedicalDeduction(medicalExpenses, compensatedAmount, annualIncome) {
            // æ§é™¤ã®å¯¾è±¡ã¨ãªã‚‹åŒ»ç™‚è²» = å®Ÿéš›ã«æ”¯æ‰•ã£ãŸåŒ»ç™‚è²»ã®ç·é¡ - ä¿é™ºé‡‘ãªã©ã§è£œå¡«ã•ã‚ŒãŸé‡‘é¡
            const actualMedicalExpenses = Math.max(0, medicalExpenses - compensatedAmount);

            const threshold = Math.min(100000, annualIncome * 0.05); // æ‰€å¾—ã®5%ã‹10ä¸‡å††ã®ã„ãšã‚Œã‹ä½ã„æ–¹
            const deductibleAmount = Math.max(0, actualMedicalExpenses - threshold); // æ§é™¤å¯¾è±¡é¡ã¯0å††ä»¥ä¸‹ã«ãªã‚‰ãªã„
            const taxRate = 0.1; // ç°¡æ˜“è¨ˆç®—ï¼ˆæ‰€å¾—ç¨ç‡10%ã‚’æƒ³å®šï¼‰
            return Math.round(deductibleAmount * taxRate);
        }

        // å€‹äººã®è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
        function calculatePersonalBenefits(salary, leavePeriod, apply80PercentBoost) {
            if (leavePeriod === 0) return { total: 0, months67: 0, months50: 0, allowance67: 0, allowance50: 0, boostedAllowance: 0, maxApplied: false, appliedSalary: 0 };

            const monthsToCalculate = Math.min(leavePeriod * 12, 24); // æœ€é•·2å¹´é–“

            // æ¨™æº–å ±é…¬æœˆé¡ã®ä¸Šé™ã‚’é©ç”¨
            const appliedSalary = Math.min(salary, MAX_MONTHLY_SALARY);

            let allowance67 = 0;
            let allowance50 = 0;
            let boostedAllowance = 0; // 80%ä¸Šä¹—ã›åˆ†

            let months67 = 0;
            let months50 = 0;

            if (apply80PercentBoost) {
                // æœ€åˆã®28æ—¥é–“ï¼ˆç´„0.9333ãƒ¶æœˆï¼‰ã‚’80%ã§è¨ˆç®—
                const boostedPeriodInMonths = 28 / 30; // ç´„0.9333ãƒ¶æœˆ

                // è‚²ä¼‘æœŸé–“ãŒ28æ—¥ï¼ˆ0.9333ãƒ¶æœˆï¼‰æœªæº€ã®å ´åˆã€ãã®æœŸé–“å…¨ä½“ã‚’80%ã§è¨ˆç®—
                const actualBoostedMonths = Math.min(monthsToCalculate, boostedPeriodInMonths);
                boostedAllowance = Math.round(appliedSalary * 0.80 * actualBoostedMonths);

                // æ®‹ã‚Šã®æœŸé–“ã‚’è¨ˆç®—
                let remainingMonths = monthsToCalculate - actualBoostedMonths;

                if (remainingMonths > 0) {
                    months67 = Math.min(remainingMonths, 6 - actualBoostedMonths);
                    if (months67 < 0) months67 = 0;

                    allowance67 = Math.round(appliedSalary * 0.67 * months67);

                    months50 = Math.max(0, remainingMonths - months67);
                    allowance50 = Math.round(appliedSalary * 0.50 * months50);
                }
            } else {
                // é€šå¸¸ã®67%ã¨50%çµ¦ä»˜
                months67 = Math.min(monthsToCalculate, 6);
                allowance67 = Math.round(appliedSalary * 0.67 * months67);

                months50 = Math.max(0, monthsToCalculate - 6);
                allowance50 = Math.round(appliedSalary * 0.50 * months50);
            }

            const total = allowance67 + allowance50 + boostedAllowance;

            return {
                total: total,
                appliedSalary: appliedSalary,
                months67: months67,
                months50: months50,
                allowance67: allowance67,
                allowance50: allowance50,
                boostedAllowance: boostedAllowance,
                maxApplied: appliedSalary < salary
            };
        }

        function calculateBenefits() {
            const husbandSalary = parseInt(document.getElementById('husbandSalary').value) || 0;
            const wifeSalary = parseInt(document.getElementById('wifeSalary').value) || 0;
            const husbandLeavePeriod = parseFloat(document.getElementById('husbandLeavePeriod').value);
            const wifeLeavePeriod = parseFloat(document.getElementById('wifeLeavePeriod').value);
            const medicalExpenses = parseInt(document.getElementById('medicalExpenses').value) || 0;
            const compensatedAmount = parseInt(document.getElementById('compensatedAmount').value) || 0; // æ–°è¦è¿½åŠ 
            const familyAllowancePerMonth = parseInt(document.getElementById('familyAllowance').value) || 0; // æ–°è¦è¿½åŠ 
            const isBirthOfThirdChildOrMore = document.getElementById('isBirthOfThirdChildOrMore').checked;

            let husbandBenefits;
            let wifeBenefits;

            // ä¸¡è¦ªã§ã®è‚²å…ä¼‘æ¥­å–å¾—ä¿ƒé€²åŠ ç®—ã®åˆ¤å®š
            const isEligibleForBoost = (husbandLeavePeriod >= (14 / 365) && wifeLeavePeriod >= (14 / 365));

            // ä¸¡æ–¹ã«80%åŠ ç®—ã‚’é©ç”¨
            husbandBenefits = calculatePersonalBenefits(husbandSalary, husbandLeavePeriod, isEligibleForBoost);
            wifeBenefits = calculatePersonalBenefits(wifeSalary, wifeLeavePeriod, isEligibleForBoost);

            // å…ç«¥æ‰‹å½“è¨ˆç®—ï¼ˆä»Šå›ç”Ÿã¾ã‚Œã‚‹å­1äººåˆ†ã®ã¿ï¼‰
            const totalLeaveMonthsForAllowance = Math.min(Math.max(husbandLeavePeriod, wifeLeavePeriod) * 12, 24);
            const childAllowanceTotal = calculateChildAllowance(isBirthOfThirdChildOrMore, totalLeaveMonthsForAllowance);

            // åŒ»ç™‚è²»æ§é™¤è¨ˆç®—
            const annualIncome = (husbandSalary + wifeSalary) * 12; // ä¸–å¸¯å¹´åã®ç°¡æ˜“è¨ˆç®—
            const medicalDeduction = calculateMedicalDeduction(medicalExpenses, compensatedAmount, annualIncome); // è£œå¡«é‡‘é¡ã‚’æ¸¡ã™

            // æ‰¶é¤Šæ‰‹å½“ã®åˆè¨ˆè¨ˆç®—
            // è‚²ä¼‘æœŸé–“ä¸­ã®æ‰¶é¤Šæ‰‹å½“ã®æ”¯çµ¦ã‚’æƒ³å®šï¼ˆå¤«å©¦ã®ã©ã¡ã‚‰ã‹ãŒè‚²ä¼‘æœŸé–“ä¸­ã§ã‚ã‚Œã°æ”¯çµ¦ã•ã‚Œã‚‹ã¨ä»®å®šï¼‰
            const totalFamilyAllowanceMonths = Math.min(Math.max(husbandLeavePeriod, wifeLeavePeriod) * 12, 24); // è‚²ä¼‘æœŸé–“ã®æœ€å¤§æœˆæ•°
            const totalFamilyAllowance = familyAllowancePerMonth * totalFamilyAllowanceMonths;

            const totalChildcareAllowance = husbandBenefits.total + wifeBenefits.total; // åŠ ç®—åˆ†ã¯å„çµ¦ä»˜é‡‘ã«å«ã‚ã‚‹
            const grandTotal = totalChildcareAllowance + childAllowanceTotal + medicalDeduction + totalFamilyAllowance; // æ‰¶é¤Šæ‰‹å½“ã‚’è¿½åŠ 

            // çµæœè¡¨ç¤º
            let resultHTML = `
                <div class="result-section">
                    <h3>ğŸ‘¨â€ğŸ’¼ å¤«ã®è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘</h3>
            `;

            if (husbandLeavePeriod > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>é©ç”¨çµ¦ä¸é¡ï¼ˆæœˆé¡ï¼‰</span>
                        <span>${husbandBenefits.appliedSalary.toLocaleString()}å†† ${husbandBenefits.maxApplied ? '(ä¸Šé™é©ç”¨)' : ''}</span>
                    </div>
                `;
                // å¤«ã«80%çµ¦ä»˜ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤º
                if (husbandBenefits.boostedAllowance > 0) {
                    const boostedMonthsDisplay = (28 / 30).toFixed(1); // ç´„0.9ãƒ¶æœˆã¨è¡¨ç¤º
                    resultHTML += `
                        <div class="result-item">
                            <span>80%çµ¦ä»˜ï¼ˆæœ€åˆã®${boostedMonthsDisplay}ãƒ¶æœˆç›¸å½“åˆ†ï¼‰</span>
                            <span>${husbandBenefits.boostedAllowance.toLocaleString()}å††</span>
                        </div>
                    `;
                }
                resultHTML += `
                    <div class="result-item">
                        <span>67%çµ¦ä»˜ï¼ˆ${husbandBenefits.months67.toFixed(1)}ãƒ¶æœˆï¼‰</span>
                        <span>${husbandBenefits.allowance67.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>50%çµ¦ä»˜ï¼ˆ${husbandBenefits.months50.toFixed(1)}ãƒ¶æœˆï¼‰</span>
                        <span>${husbandBenefits.allowance50.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>å°è¨ˆ</span>
                        <span>${husbandBenefits.total.toLocaleString()}å††</span>
                    </div>
                `;
            } else {
                resultHTML += `
                    <div class="result-item">
                        <span>è‚²ä¼‘å–å¾—ãªã—</span>
                        <span>0å††</span>
                    </div>
                `;
            }

            resultHTML += `
                </div>
                <div class="result-section">
                    <h3>ğŸ‘©â€ğŸ’¼ å¦»ã®è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘</h3>
            `;

            if (wifeLeavePeriod > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>é©ç”¨çµ¦ä¸é¡ï¼ˆæœˆé¡ï¼‰</span>
                        <span>${wifeBenefits.appliedSalary.toLocaleString()}å†† ${wifeBenefits.maxApplied ? '(ä¸Šé™é©ç”¨)' : ''}</span>
                    </div>
                `;
                // å¦»ã«80%çµ¦ä»˜ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤º
                if (wifeBenefits.boostedAllowance > 0) {
                    const boostedMonthsDisplay = (28 / 30).toFixed(1); // ç´„0.9ãƒ¶æœˆã¨è¡¨ç¤º
                       resultHTML += `
                        <div class="result-item">
                            <span>80%çµ¦ä»˜ï¼ˆæœ€åˆã®${boostedMonthsDisplay}ãƒ¶æœˆç›¸å½“åˆ†ï¼‰</span>
                            <span>${wifeBenefits.boostedAllowance.toLocaleString()}å††</span>
                        </div>
                    `;
                }
                resultHTML += `
                    <div class="result-item">
                        <span>67%çµ¦ä»˜ï¼ˆ${wifeBenefits.months67.toFixed(1)}ãƒ¶æœˆï¼‰</span>
                        <span>${wifeBenefits.allowance67.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>50%çµ¦ä»˜ï¼ˆ${wifeBenefits.months50.toFixed(1)}ãƒ¶æœˆï¼‰</span>
                        <span>${wifeBenefits.allowance50.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>å°è¨ˆ</span>
                        <span>${wifeBenefits.total.toLocaleString()}å††</span>
                    </div>
                </div>
            `;
            } else {
                resultHTML += `
                    <div class="result-item">
                        <span>è‚²ä¼‘å–å¾—ãªã—</span>
                        <span>0å††</span>
                    </div>
                </div>
                `;
            }

            resultHTML += `
                <div class="result-section">
                    <h3>ğŸ‘¶ å…ç«¥æ‰‹å½“ãƒ»ãã®ä»–</h3>
                    <div class="result-item">
                        <span>å…ç«¥æ‰‹å½“ï¼ˆä»Šå›ç”Ÿã¾ã‚Œã‚‹å­1äººåˆ†ã€${totalLeaveMonthsForAllowance.toFixed(1)}ãƒ¶æœˆåˆ†ï¼‰</span>
                        <span>${childAllowanceTotal.toLocaleString()}å††</span>
                    </div>
            `;
            // æ‰¶é¤Šæ‰‹å½“ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°è¡¨ç¤º
            if (familyAllowancePerMonth > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>æ‰¶é¤Šæ‰‹å½“ï¼ˆ${totalFamilyAllowanceMonths.toFixed(1)}ãƒ¶æœˆåˆ†ï¼‰</span>
                        <span>${totalFamilyAllowance.toLocaleString()}å††</span>
                    </div>
                `;
            }
            resultHTML += `
                    <div class="result-item">
                        <span>åŒ»ç™‚è²»æ§é™¤ã«ã‚ˆã‚‹é‚„ä»˜ï¼ˆæ¦‚ç®—ï¼‰</span>
                        <span>${medicalDeduction.toLocaleString()}å††</span>
                    </div>
                </div>
                <div class="result-item total">
                    <span>ğŸ‰ åˆè¨ˆå—çµ¦é¡ï¼ˆæ¦‚ç®—ï¼‰</span>
                    <span>${grandTotal.toLocaleString()}å††</span>
                </div>
            `;

            document.getElementById('resultContent').innerHTML = resultHTML;
            document.getElementById('results').style.display = 'block';
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å‰Šé™¤
            // document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // åˆæœŸè¨ˆç®—
        window.addEventListener('load', function() {
            calculateBenefits();
        });

        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—
        document.addEventListener('input', calculateBenefits);
        document.addEventListener('change', calculateBenefits);
    </script>
</body>
</html>
