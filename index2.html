<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>育児休業給付金計算シート</title>
    <style>
        /* 出産後手続きチェックリストと色合いを統一 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #3A3A3A; /* 全体の文字色を濃いグレーに */
            background: #FFF8F6; /* チェックリストと同じ背景色 */
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #FFFFFF; /* 白い背景 */
            border-radius: 12px; /* 少し丸みを大きく */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* 影を柔らかく */
            overflow: hidden;
        }

        .header {
            background: #F7CEDC; /* チェックリストのヘッダーと同じ色 */
            color: #3A3A3A; /* チェックリストのヘッダーと同じ文字色 */
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 500; /* フォントの太さを調整 */
        }

        .header p {
            font-size: 1em;
            opacity: 0.9; /* 少し透明度を持たせる */
        }

        .form-section {
            padding: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #5A5A5A; /* ラベルの色を調整 */
            font-size: 15px; /* フォントサイズを調整 */
        }

        .input-group small {
            color: #777; /* 小さな説明文の色 */
            font-size: 0.85em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #E2DDE3; /* 柔らかいボーダー色 */
            border-radius: 8px; /* 丸みを少し大きく */
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: white;
            color: #3A3A3A; /* 入力文字色 */
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #C58FA0; /* チェックリストの強調色系 */
            box-shadow: 0 0 0 3px rgba(197, 143, 160, 0.2); /* フォーカス時の影 */
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            transform: scale(1.2);
            accent-color: #C58FA0; /* チェックボックスの色 */
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-weight: normal;
            color: #3A3A3A; /* チェックボックスラベルの色 */
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: #D79BA0; /* 暖色系のボタン色 */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 17px; /* フォントサイズを少し大きく */
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            background: #C58FA0; /* ホバー時の色 */
            transform: translateY(-1px); /* 少し浮き上がるアニメーション */
        }

        .results {
            margin-top: 30px;
            padding: 25px;
            background: #FDF5F7; /* チェックリストの注意事項と同じ背景色 */
            border-radius: 10px;
            border: 1px solid #F2DDE3; /* チェックリストの注意事項と同じボーダー色 */
            display: none;
            animation: fadeIn 0.5s ease-out; /* フェードインアニメーション */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results h2 {
            margin-bottom: 20px;
            font-size: 1.6em; /* フォントサイズを調整 */
            text-align: center;
            color: #A1546E; /* 濃いめのピンク */
        }

        .result-section {
            margin-bottom: 25px;
        }

        .result-section h3 {
            font-size: 1.3em; /* フォントサイズを調整 */
            color: #C58FA0; /* チェックリストの注意事項H3と同じ色 */
            margin-bottom: 10px;
            border-bottom: 2px solid #D79BA0; /* ボタンと同じ色で下線 */
            padding-bottom: 5px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0; /* パディングを調整 */
            border-bottom: 1px solid #F2F2F2; /* 非常に薄いボーダー */
            color: #3A3A3A; /* 文字色を濃く */
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-item.total {
            font-weight: bold;
            font-size: 1.2em; /* フォントサイズを大きく */
            margin-top: 20px; /* 余白を大きく */
            padding-top: 20px; /* パディングを大きく */
            border-top: 2px solid #C58FA0; /* 濃いめのピンク */
            color: #A1546E; /* 最も濃いピンク */
        }

        .notice {
            background: #FFF3F6; /* さらに薄いピンク */
            border: 1px solid #F7CEDC; /* ヘッダーと同じ色のボーダー */
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px; /* 上部の余白を調整 */
            color: #5A5A5A; /* 注意事項の文字色 */
        }

        .notice h3 {
            margin-bottom: 15px;
            color: #A1546E; /* 濃いめのピンク */
            font-size: 1.2em;
        }

        .notice ul {
            margin-left: 25px; /* インデントを調整 */
        }

        .notice li {
            margin-bottom: 8px; /* 各項目の余白を調整 */
            color: #5A5A5A;
        }

        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .header {
                padding: 25px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .form-section {
                padding: 20px;
            }

            .results, .notice {
                padding: 20px;
                margin: 20px;
            }
            .results h2 {
                font-size: 1.4em;
            }
            .result-section h3 {
                font-size: 1.1em;
            }
            .result-item.total {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>育児休業給付金計算シート</h1>
            <p>2025年最新制度対応版（夫婦別計算・医療費控除対応）</p>
        </div>

        <div class="form-section">
            <div class="form-row">
                <div class="input-group">
                    <label for="husbandSalary">夫の月給（円）<br><small>※社会保険料などが引かれる前の額面金額</small></label>
                    <input type="number" id="husbandSalary" value="350000" min="0">
                </div>
                <div class="input-group">
                    <label for="wifeSalary">妻の月給（円）<br><small>※社会保険料などが引かれる前の額面金額</small></label>
                    <input type="number" id="wifeSalary" value="280000" min="0">
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="husbandLeavePeriod">夫の育休取得期間（年）</label>
                    <select id="husbandLeavePeriod">
                        <option value="0">取得しない</option>
                        <option value="0.038">14日間</option> <option value="0.0833">1ヶ月</option> <option value="0.25">3ヶ月</option>
                        <option value="0.5">6ヶ月</option>
                        <option value="1">1年</option>
                        <option value="1.5">1年6ヶ月</option>
                        <option value="2">2年</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="wifeLeavePeriod">妻の育休取得期間（年）</label>
                    <select id="wifeLeavePeriod">
                        <option value="0.5">6ヶ月</option>
                        <option value="1" selected>1年</option>
                        <option value="1.5">1年6ヶ月</option>
                        <option value="2">2年</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="medicalExpenses">年間医療費総額（円）<br><small>※実際に支払った医療費の総額</small></label>
                    <input type="number" id="medicalExpenses" value="0" min="0">
                </div>
                <div class="input-group">
                    <label for="compensatedAmount">保険金などで補填された金額（円）<br><small>※出産育児一時金、高額療養費、医療保険など</small></label>
                    <input type="number" id="compensatedAmount" value="0" min="0">
                </div>
            </div>

            <div class="form-row single">
                <div class="input-group">
                    <label for="familyAllowance">月額の扶養手当（円）</label>
                    <input type="number" id="familyAllowance" value="0" min="0">
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="isBirthOfThirdChildOrMore">
                <label for="isBirthOfThirdChildOrMore">今回生まれる子が第3子以降である</label>
            </div>

            <button class="calculate-btn" onclick="calculateBenefits()">計算する</button>

            <div id="results" class="results">
                <h2>💰 計算結果</h2>
                <div id="resultContent"></div>
            </div>

            <div class="notice">
                <h3>📋 ご利用にあたっての注意事項</h3>
                <ul>
                    <li>このシミュレーションは、2025年時点の情報を元にした**概算値**です。実際の受給額は、個別の状況（標準報酬月額の変動、家族構成、税金の控除、市町村の制度など）により異なります。</li>
                    <li><strong>育児休業給付金</strong>は、雇用保険から支給される非課税の手当です。標準報酬日額の上限（15,690円）が適用される場合があります。</li>
                    <li><strong>出生後休業支援給付金（両親での育児休業取得促進加算）</strong>は、夫婦それぞれが14日以上育児休業（男性は出生時育児休業）を取得した場合に、**それぞれ最大28日間**、育児休業給付金の給付率が67%から80%に引き上げられる制度です。</li>
                    <li><strong>児童手当</strong>は、今回生まれるお子さん1人分の金額（月額15,000円または30,000円）で計算しています。</li>
                    <li><strong>医療費控除</strong>による還付額は、簡易的な所得税率（10%）で計算しており、実際の還付額は個人の所得や他の控除によって変わります。確定申告が必要です。「年間医療費総額」から「保険金などで補填された金額」を差し引いた額が控除の対象となります。</li>
                    <li>正確な情報は、お住まいの自治体やハローワーク、税務署にご確認ください。</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 2025年の育児休業給付金上限設定
        const MAX_DAILY_SALARY = 15690; // 円/日
        const MAX_MONTHLY_SALARY = MAX_DAILY_SALARY * 30; // 約47万円/月

        function calculateChildAllowance(isBirthOfThirdChildOrMore, months) {
            let monthlyAmount = 0;
            if (isBirthOfThirdChildOrMore) {
                // 今回生まれる子が第3子以降の場合、月30,000円
                monthlyAmount = 30000;
            } else {
                // 今回生まれる子が第1子または第2子の場合、月15,000円 (0-2歳相当)
                monthlyAmount = 15000;
            }
            return monthlyAmount * months;
        }

        // 医療費控除の計算関数に補填金額を追加
        function calculateMedicalDeduction(medicalExpenses, compensatedAmount, annualIncome) {
            // 控除の対象となる医療費 = 実際に支払った医療費の総額 - 保険金などで補填された金額
            const actualMedicalExpenses = Math.max(0, medicalExpenses - compensatedAmount);

            const threshold = Math.min(100000, annualIncome * 0.05); // 所得の5%か10万円のいずれか低い方
            const deductibleAmount = Math.max(0, actualMedicalExpenses - threshold); // 控除対象額は0円以下にならない
            const taxRate = 0.1; // 簡易計算（所得税率10%を想定）
            return Math.round(deductibleAmount * taxRate);
        }

        // 個人の育児休業給付金を計算する関数
        function calculatePersonalBenefits(salary, leavePeriod, apply80PercentBoost) {
            if (leavePeriod === 0) return { total: 0, months67: 0, months50: 0, allowance67: 0, allowance50: 0, boostedAllowance: 0, maxApplied: false, appliedSalary: 0 };

            const monthsToCalculate = Math.min(leavePeriod * 12, 24); // 最長2年間

            // 標準報酬月額の上限を適用
            const appliedSalary = Math.min(salary, MAX_MONTHLY_SALARY);

            let allowance67 = 0;
            let allowance50 = 0;
            let boostedAllowance = 0; // 80%上乗せ分

            let months67 = 0;
            let months50 = 0;

            if (apply80PercentBoost) {
                // 最初の28日間（約0.9333ヶ月）を80%で計算
                const boostedPeriodInMonths = 28 / 30; // 約0.9333ヶ月

                // 育休期間が28日（0.9333ヶ月）未満の場合、その期間全体を80%で計算
                const actualBoostedMonths = Math.min(monthsToCalculate, boostedPeriodInMonths);
                boostedAllowance = Math.round(appliedSalary * 0.80 * actualBoostedMonths);

                // 残りの期間を計算
                let remainingMonths = monthsToCalculate - actualBoostedMonths;

                if (remainingMonths > 0) {
                    months67 = Math.min(remainingMonths, 6 - actualBoostedMonths);
                    if (months67 < 0) months67 = 0;

                    allowance67 = Math.round(appliedSalary * 0.67 * months67);

                    months50 = Math.max(0, remainingMonths - months67);
                    allowance50 = Math.round(appliedSalary * 0.50 * months50);
                }
            } else {
                // 通常の67%と50%給付
                months67 = Math.min(monthsToCalculate, 6);
                allowance67 = Math.round(appliedSalary * 0.67 * months67);

                months50 = Math.max(0, monthsToCalculate - 6);
                allowance50 = Math.round(appliedSalary * 0.50 * months50);
            }

            const total = allowance67 + allowance50 + boostedAllowance;

            return {
                total: total,
                appliedSalary: appliedSalary,
                months67: months67,
                months50: months50,
                allowance67: allowance67,
                allowance50: allowance50,
                boostedAllowance: boostedAllowance,
                maxApplied: appliedSalary < salary
            };
        }

        function calculateBenefits() {
            const husbandSalary = parseInt(document.getElementById('husbandSalary').value) || 0;
            const wifeSalary = parseInt(document.getElementById('wifeSalary').value) || 0;
            const husbandLeavePeriod = parseFloat(document.getElementById('husbandLeavePeriod').value);
            const wifeLeavePeriod = parseFloat(document.getElementById('wifeLeavePeriod').value);
            const medicalExpenses = parseInt(document.getElementById('medicalExpenses').value) || 0;
            const compensatedAmount = parseInt(document.getElementById('compensatedAmount').value) || 0; // 新規追加
            const familyAllowancePerMonth = parseInt(document.getElementById('familyAllowance').value) || 0; // 新規追加
            const isBirthOfThirdChildOrMore = document.getElementById('isBirthOfThirdChildOrMore').checked;

            let husbandBenefits;
            let wifeBenefits;

            // 両親での育児休業取得促進加算の判定
            const isEligibleForBoost = (husbandLeavePeriod >= (14 / 365) && wifeLeavePeriod >= (14 / 365));

            // 両方に80%加算を適用
            husbandBenefits = calculatePersonalBenefits(husbandSalary, husbandLeavePeriod, isEligibleForBoost);
            wifeBenefits = calculatePersonalBenefits(wifeSalary, wifeLeavePeriod, isEligibleForBoost);

            // 児童手当計算（今回生まれる子1人分のみ）
            const totalLeaveMonthsForAllowance = Math.min(Math.max(husbandLeavePeriod, wifeLeavePeriod) * 12, 24);
            const childAllowanceTotal = calculateChildAllowance(isBirthOfThirdChildOrMore, totalLeaveMonthsForAllowance);

            // 医療費控除計算
            const annualIncome = (husbandSalary + wifeSalary) * 12; // 世帯年収の簡易計算
            const medicalDeduction = calculateMedicalDeduction(medicalExpenses, compensatedAmount, annualIncome); // 補填金額を渡す

            // 扶養手当の合計計算
            // 育休期間中の扶養手当の支給を想定（夫婦のどちらかが育休期間中であれば支給されると仮定）
            const totalFamilyAllowanceMonths = Math.min(Math.max(husbandLeavePeriod, wifeLeavePeriod) * 12, 24); // 育休期間の最大月数
            const totalFamilyAllowance = familyAllowancePerMonth * totalFamilyAllowanceMonths;

            const totalChildcareAllowance = husbandBenefits.total + wifeBenefits.total; // 加算分は各給付金に含める
            const grandTotal = totalChildcareAllowance + childAllowanceTotal + medicalDeduction + totalFamilyAllowance; // 扶養手当を追加

            // 結果表示
            let resultHTML = `
                <div class="result-section">
                    <h3>👨‍💼 夫の育児休業給付金</h3>
            `;

            if (husbandLeavePeriod > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>適用給与額（月額）</span>
                        <span>${husbandBenefits.appliedSalary.toLocaleString()}円 ${husbandBenefits.maxApplied ? '(上限適用)' : ''}</span>
                    </div>
                `;
                // 夫に80%給付が適用されている場合のみ表示
                if (husbandBenefits.boostedAllowance > 0) {
                    const boostedMonthsDisplay = (28 / 30).toFixed(1); // 約0.9ヶ月と表示
                    resultHTML += `
                        <div class="result-item">
                            <span>80%給付（最初の${boostedMonthsDisplay}ヶ月相当分）</span>
                            <span>${husbandBenefits.boostedAllowance.toLocaleString()}円</span>
                        </div>
                    `;
                }
                resultHTML += `
                    <div class="result-item">
                        <span>67%給付（${husbandBenefits.months67.toFixed(1)}ヶ月）</span>
                        <span>${husbandBenefits.allowance67.toLocaleString()}円</span>
                    </div>
                    <div class="result-item">
                        <span>50%給付（${husbandBenefits.months50.toFixed(1)}ヶ月）</span>
                        <span>${husbandBenefits.allowance50.toLocaleString()}円</span>
                    </div>
                    <div class="result-item">
                        <span>小計</span>
                        <span>${husbandBenefits.total.toLocaleString()}円</span>
                    </div>
                `;
            } else {
                resultHTML += `
                    <div class="result-item">
                        <span>育休取得なし</span>
                        <span>0円</span>
                    </div>
                `;
            }

            resultHTML += `
                </div>
                <div class="result-section">
                    <h3>👩‍💼 妻の育児休業給付金</h3>
            `;

            if (wifeLeavePeriod > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>適用給与額（月額）</span>
                        <span>${wifeBenefits.appliedSalary.toLocaleString()}円 ${wifeBenefits.maxApplied ? '(上限適用)' : ''}</span>
                    </div>
                `;
                // 妻に80%給付が適用されている場合のみ表示
                if (wifeBenefits.boostedAllowance > 0) {
                    const boostedMonthsDisplay = (28 / 30).toFixed(1); // 約0.9ヶ月と表示
                       resultHTML += `
                        <div class="result-item">
                            <span>80%給付（最初の${boostedMonthsDisplay}ヶ月相当分）</span>
                            <span>${wifeBenefits.boostedAllowance.toLocaleString()}円</span>
                        </div>
                    `;
                }
                resultHTML += `
                    <div class="result-item">
                        <span>67%給付（${wifeBenefits.months67.toFixed(1)}ヶ月）</span>
                        <span>${wifeBenefits.allowance67.toLocaleString()}円</span>
                    </div>
                    <div class="result-item">
                        <span>50%給付（${wifeBenefits.months50.toFixed(1)}ヶ月）</span>
                        <span>${wifeBenefits.allowance50.toLocaleString()}円</span>
                    </div>
                    <div class="result-item">
                        <span>小計</span>
                        <span>${wifeBenefits.total.toLocaleString()}円</span>
                    </div>
                </div>
            `;
            } else {
                resultHTML += `
                    <div class="result-item">
                        <span>育休取得なし</span>
                        <span>0円</span>
                    </div>
                </div>
                `;
            }

            resultHTML += `
                <div class="result-section">
                    <h3>👶 児童手当・その他</h3>
                    <div class="result-item">
                        <span>児童手当（今回生まれる子1人分、${totalLeaveMonthsForAllowance.toFixed(1)}ヶ月分）</span>
                        <span>${childAllowanceTotal.toLocaleString()}円</span>
                    </div>
            `;
            // 扶養手当が設定されていれば表示
            if (familyAllowancePerMonth > 0) {
                resultHTML += `
                    <div class="result-item">
                        <span>扶養手当（${totalFamilyAllowanceMonths.toFixed(1)}ヶ月分）</span>
                        <span>${totalFamilyAllowance.toLocaleString()}円</span>
                    </div>
                `;
            }
            resultHTML += `
                    <div class="result-item">
                        <span>医療費控除による還付（概算）</span>
                        <span>${medicalDeduction.toLocaleString()}円</span>
                    </div>
                </div>
                <div class="result-item total">
                    <span>🎉 合計受給額（概算）</span>
                    <span>${grandTotal.toLocaleString()}円</span>
                </div>
            `;

            document.getElementById('resultContent').innerHTML = resultHTML;
            document.getElementById('results').style.display = 'block';
            // スクロールを削除
            // document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // 初期計算
        window.addEventListener('load', function() {
            calculateBenefits();
        });

        // リアルタイム計算
        document.addEventListener('input', calculateBenefits);
        document.addEventListener('change', calculateBenefits);
    </script>
</body>
</html>
